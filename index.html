<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Acceso Seguro</title>
  <script>
    // URL de tu Google Apps Script
    const googleScriptURL = "https://script.google.com/macros/s/AKfycbzWUDe4c_IQPQPjz5togLqfJCfhhzfbGhhFzs0nxGWUC9ySvUi_ThKTAGZlz_sD1Ao4oA/exec";
    
    // Definici贸n global de la funci贸n validarAcceso
    function validarAcceso() {
      let email = document.getElementById("email").value;
      let password = document.getElementById("password").value;
      console.log("validarAcceso ejecutada:", email, password);

      fetch(googleScriptURL, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({ email: email, password: password })
      })
      .then(response => response.text())
      .then(data => {
          console.log("Respuesta recibida:", data);
          document.getElementById("status").innerText = data;
          // Si la respuesta contiene "Bienvenido" redirige al visor
          if (data.includes("Bienvenido")) {
              localStorage.setItem("usuarioAutenticado", "true");
              window.location.href = "visor.html";  // Cambia "visor.html" por la ruta adecuada en tu proyecto
          }
      })
      .catch(error => {
          console.error("Error en la conexi贸n:", error);
          document.getElementById("status").innerText = "Error de conexi贸n.";
      });
    }
  </script>
</head>
<body>
  <h2>Ingrese su Correo y Clave</h2>
  <input type="email" id="email" placeholder="Ingrese su correo"><br><br>
  <input type="password" id="password" placeholder="Clave de acceso"><br><br>
  <button onclick="validarAcceso()">Ingresar</button>
  
  <p id="status"></p>
</body>
</html>
